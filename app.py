# -*- coding: utf-8 -*-
"""app.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1VtAPuy0VHWgF8yAN9k49xRyzfMIQBScj
"""

import streamlit as st
import joblib
import numpy as np

# Load models and utilities
reg_model = pickle.load(open("model.pkl", "rb"))
cls_model = pickle.load(open("model2.pkl", "rb"))
scaler = pickle.load(open("scaler.pkl", "rb"))
encoder = pickle.load(open("label.pkl", "rb"))

st.title("AQI Prediction System")

st.write("Enter pollutant values to predict AQI and its category")

# Inputs
features = [
    st.number_input("PM2.5", 0.0),
    st.number_input("PM10", 0.0),
    st.number_input("NO", 0.0),
    st.number_input("NO2", 0.0),
    st.number_input("NOx", 0.0),
    st.number_input("NH3", 0.0),
    st.number_input("CO", 0.0),
    st.number_input("SO2", 0.0),
    st.number_input("O3", 0.0),
    st.number_input("Benzene", 0.0),
    st.number_input("Toluene", 0.0)
]

if st.button("Predict AQI"):
    X = np.array([features])
    X_scaled = scaler.transform(X)

    # Regression prediction
    aqi_value = reg_model.predict(X_scaled)[0]

    # Classification prediction (encoded)
    encoded_class = cls_model.predict(X_scaled)[0]

    # Decode AQI bucket
    aqi_bucket = encoder.inverse_transform([encoded_class])[0]

    st.success(f"Predicted AQI Value: **{aqi_value:.2f}**")
    st.info(f"AQI Category: **{aqi_bucket}**")
